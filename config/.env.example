# Home Assistant Configuration Environment Variables
# Copy this file to .env and fill in your credentials

# ============================================
# Environment Settings
# ============================================
ENVIRONMENT=development  # Options: dev, staging, production
TZ=America/New_York

# ============================================
# Omi Wearables MCP Integration
# ============================================

# Omi.me MCP API Token
# Get from Omi app: Settings → Developer → MCP
# REQUIRED for wearable integration
OMI_MCP_API_TOKEN=your_omi_mcp_token_here

# Omi MCP Server URLs
OMI_MCP_BASE_URL=https://api.omi.me/v1
OMI_MCP_SERVER_URL=https://api.omi.me/v1/mcp/sse

# Omi Webhook Configuration
# Generate secure token: python -c "import secrets; print(secrets.token_urlsafe(48))"
OMI_WEBHOOK_SECRET=your_secure_webhook_secret_here

# Omi Device ID (optional, if using specific device)
OMI_DEVICE_ID=

# Webhook URL (where Omi sends events)
# For local development: use ngrok to tunnel
WEBHOOK_URL=http://localhost:8000/webhook/omi

# ============================================
# Home Assistant Configuration
# ============================================

# Home Assistant URL
HOME_ASSISTANT_URL=http://homeassistant:8123

# Home Assistant Long-Lived Token
# Create in HA: Profile → Long-Lived Access Tokens
HOME_ASSISTANT_TOKEN=your_home_assistant_token_here

# Home Assistant Port
HOME_ASSISTANT_PORT=8123

# Home Assistant API Password (legacy, if using older version)
# HOME_ASSISTANT_PASSWORD=your_password

# ============================================
# MQTT Broker Configuration (Mosquitto)
# ============================================

MQTT_BROKER=mosquitto
MQTT_PORT=1883
MQTT_USER=homeassistant
MQTT_PASSWORD=your_mqtt_password_here

# MQTT Security
MQTT_KEEPALIVE=60
MQTT_QOS=1  # 0=at-most-once, 1=at-least-once, 2=exactly-once

# MQTT Topic Prefix
MQTT_TOPIC_PREFIX=ha/

# ============================================
# InfluxDB Time-Series Database
# ============================================

INFLUXDB_HOST=influxdb
INFLUXDB_PORT=8086
INFLUXDB_DB=omi_metrics
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=changeme

# InfluxDB v2 Configuration (if using v2.x)
INFLUXDB_ORG=home-automation
INFLUXDB_BUCKET=home_automation
INFLUXDB_RETENTION=30d

# InfluxDB API Token (for v2.x)
# INFLUXDB_API_TOKEN=your_token_here

# ============================================
# Grafana Monitoring
# ============================================

GRAFANA_HOST=grafana
GRAFANA_PORT=3000
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=your_grafana_password_here

# Grafana API Key (for automation)
# Create in Grafana: Configuration → API Keys
GRAFANA_API_KEY=

# ============================================
# Bee AI AgentStack Configuration
# ============================================

# Enable AgentStack
AGENTSTACK_ENABLED=true

# CLI Path
AGENTSTACK_CLI_PATH=agentstack

# Default AI Provider
AGENTSTACK_DEFAULT_PROVIDER=openai  # Options: openai, anthropic, gemini, watsonx, ollama

# Memory Processing Settings
AGENTSTACK_AUTO_PROCESS=true
AGENTSTACK_BATCH_SIZE=10
AGENTSTACK_INTERVAL_SECONDS=60

# AgentStack UI
AGENTSTACK_UI_ENABLED=true
AGENTSTACK_UI_PORT=3000
AGENTSTACK_UI_HOST=0.0.0.0

# ============================================
# OpenAI Configuration (for AgentStack/Memory Analysis)
# ============================================

OPENAI_API_KEY=your_openai_api_key_here
OPENAI_ORG_ID=

# Model Configuration
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# ============================================
# Anthropic Claude Configuration (Optional)
# ============================================

ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ============================================
# Google Gemini Configuration (Optional)
# ============================================

GOOGLE_API_KEY=your_google_api_key_here

# ============================================
# IBM watsonx Configuration (Optional)
# ============================================

WATSONX_API_KEY=your_watsonx_api_key_here

# ============================================
# Proxmox VE Integration
# ============================================

# Proxmox Host
PROXMOX_HOST=192.168.1.185
PROXMOX_PORT=8006
PROXMOX_PROTOCOL=https

# Proxmox API Token Authentication
# Create in Proxmox: Datacenter → Permissions → API Tokens
PROXMOX_TOKEN=your_proxmox_api_token_here

# Proxmox User
PROXMOX_USER=root@pam

# SSL Certificate Verification (set to false for self-signed)
PROXMOX_VERIFY_SSL=false

# ============================================
# GitHub Integration (Optional)
# ============================================

GITHUB_TOKEN=your_github_token_here
GITHUB_USERNAME=bryansrevision

# ============================================
# Bitwarden Secrets Management (Optional)
# ============================================

BITWARDEN_SERVER=https://vault.bitwarden.com
BITWARDEN_EMAIL=your-email@example.com

# Bitwarden session token (generate with: bw unlock --raw)
# BW_SESSION=your_bitwarden_session_key

# Bitwarden API credentials for CI/CD
# BW_CLIENTID=user.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# BW_CLIENTSECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================
# Security & Rate Limiting
# ============================================

# Webhook Secret (different from OMI_WEBHOOK_SECRET)
WEBHOOK_SECRET=your_webhook_security_token_here

# Rate Limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=60

# Maximum request size (MB)
MAX_REQUEST_SIZE_MB=10

# HTTPS Enforcement (if behind reverse proxy)
ENABLE_HTTPS_REDIRECT=false

# ============================================
# Logging Configuration
# ============================================

LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # Options: json or text

# ============================================
# Observability
# ============================================

ENABLE_METRICS=true
ENABLE_TRACING=true

# Prometheus Metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# ============================================
# Docker Resource Limits
# ============================================

# InfluxDB
INFLUXDB_CPU_LIMIT=2.0
INFLUXDB_MEMORY_LIMIT=1G

# Grafana
GRAFANA_CPU_LIMIT=1.0
GRAFANA_MEMORY_LIMIT=512M

# Home Assistant
HA_CPU_LIMIT=2.0
HA_MEMORY_LIMIT=1G

# MQTT (Mosquitto)
MQTT_CPU_LIMIT=0.5
MQTT_MEMORY_LIMIT=256M

# Webhook Service
WEBHOOK_CPU_LIMIT=1.0
WEBHOOK_MEMORY_LIMIT=512M

# ============================================
# Notification Services
# ============================================

# Email Notifications
EMAIL_ENABLED=false
EMAIL_FROM=homeassistant@example.com
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password

# Mobile App Notifications
# Configure through Home Assistant UI

# Slack Notifications
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=

# Discord Notifications
DISCORD_ENABLED=false
DISCORD_WEBHOOK_URL=

# ============================================
# Advanced Configuration
# ============================================

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0\ 2\ \*\ \*\ \*  # Cron format: Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Enable Debug Mode
DEBUG=false

# API Host/Port
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1

# Max concurrent requests
MAX_CONCURRENT_REQUESTS=10

# Event queue size
EVENT_QUEUE_SIZE=10000

# Cache TTL (seconds)
CACHE_TTL_SECONDS=300

# Connection timeout (seconds)
CONNECTION_TIMEOUT_SECONDS=30

# Request timeout (seconds)
REQUEST_TIMEOUT_SECONDS=60

# ============================================
# Optional Features
# ============================================

# Node-RED Visual Programming
NODE_RED_ENABLED=false
NODE_RED_PORT=1880

# Elasticsearch for advanced logging
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200

# Loki for log aggregation
LOKI_ENABLED=false
LOKI_URL=http://loki:3100

# ============================================
# Feature Flags
# ============================================

FEATURE_OMI_MCP_INTEGRATION=true
FEATURE_AGENTSTACK_ENABLED=true
FEATURE_PROXMOX_MONITORING=true
FEATURE_ADVANCED_AUTOMATIONS=true
FEATURE_AI_INSIGHTS=true
