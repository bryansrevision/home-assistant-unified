---
# Automated Backup Sync Schedule
# Add to Home Assistant automation or run as cron job

automation:
  - id: vm101_hourly_sync
    alias: "VM 101: Hourly Configuration Sync"
    trigger:
      - platform: time_pattern
        hours: "/1"  # Every hour
    action:
      - service: shell_command.sync_to_vm101
  - id: vm101_nightly_full_sync
    alias: "VM 101: Nightly Full Backup Sync"
    trigger:
      - platform: time
        at: "02:00:00"
    action:
      - service: shell_command.full_sync_to_vm101
      - service: shell_command.verify_vm101_health

  - id: vm101_health_check
    alias: "VM 101: Health Check Every 5 Minutes"
    trigger:
      - platform: time_pattern
        minutes: "/5"
    action:
      - service: shell_command.check_vm101_health

shell_command:
  sync_to_vm101: "/config/scripts/vm101/sync-to-backup.sh"
  full_sync_to_vm101: "/config/scripts/vm101/sync-to-backup.sh --full"
  check_vm101_health: "/config/scripts/vm101/monitor-ha-health.sh"
  verify_vm101_health: "/config/scripts/vm101/verify-backup-integrity.sh"
