---
# Dashboard Integration Configuration
# Main configuration file for dashboard system
# Created: February 1, 2026

# ============================================================================
# DASHBOARD MODE
# ============================================================================
# Use YAML mode for dashboards to enable version control
lovelace:
  mode: yaml
  resources:
    # Custom cards (install via HACS if needed)
    - url: /hacsfiles/mini-media-player/mini-media-player-bundle.js
      type: module
    - url: /hacsfiles/button-card/button-card.js
      type: module
    - url: /hacsfiles/lovelace-card-mod/card-mod.js
      type: module
  dashboards:
    lovelace-main:
      mode: yaml
      title: Home Assistant Unified
      icon: mdi:view-dashboard
      show_in_sidebar: true
      filename: dashboards/lovelace-main.yaml

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
frontend:
  themes: !include_dir_merge_named themes
  extra_module_url:
    - /hacsfiles/lovelace-card-mod/card-mod.js

# ============================================================================
# HTTP/SSL CONFIGURATION
# ============================================================================
http:
  server_port: 8123
  cors_allowed_origins:
    - https://google.com
    - https://www.home-assistant.io
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
    - ::1
  ip_ban_enabled: true
  login_attempts_threshold: 5

# ============================================================================
# RECORDER - DATABASE CONFIGURATION
# ============================================================================
recorder:
  db_url: !secret db_url
  purge_keep_days: 7
  commit_interval: 1
  exclude:
    domains:
      - automation
      - updater
      - camera
    entity_globs:
      - sensor.weather_*
    entities:
      - sun.sun
      - sensor.last_boot
      - sensor.date

# ============================================================================
# HISTORY & LOGBOOK
# ============================================================================
history:
  use_include_order: true
  include:
    domains:
      - sensor
      - switch
      - media_player
      - light
      - binary_sensor
      - device_tracker

logbook:
  include:
    domains:
      - light
      - switch
      - media_player
      - climate

# ============================================================================
# LOGGER CONFIGURATION
# ============================================================================
logger:
  default: info
  logs:
    homeassistant.core: warning
    homeassistant.components.http: warning
    homeassistant.components.alexa: info
    homeassistant.components.mobile_app: info
    custom_components.alexa_media: info

# ============================================================================
# SYSTEM HEALTH & DIAGNOSTICS
# ============================================================================
system_health:

diagnostics:

# ============================================================================
# NOTIFICATIONS
# ============================================================================
notify:
  # Persistent notifications
  - platform: persistent_notification
    name: persistent_notification
  
  # Mobile app notifications (auto-discovered)
  # - platform: mobile_app
  #   name: mobile_app_phone

# ============================================================================
# TEXT-TO-SPEECH
# ============================================================================
tts:
  - platform: google_translate
    cache: true
    cache_dir: /tmp/tts
    time_memory: 300
    language: 'en'

# ============================================================================
# CLOUD & DISCOVERY
# ============================================================================
# Uncomment if using Nabu Casa Cloud
# cloud:

discovery:
  ignore:
    - samsung_tv
  enable:
    - homekit

zeroconf:

ssdp:

# ============================================================================
# NETWORK PRESENCE DETECTION
# ============================================================================
device_tracker:
  - platform: ping
    hosts:
      phone: !secret phone_ip
      tablet: !secret tablet_ip
      laptop: !secret laptop_ip
    count: 2
    consider_home: 180

# ============================================================================
# MOBILE APP
# ============================================================================
mobile_app:

# ============================================================================
# PERSON CONFIGURATION
# ============================================================================
person:
  - name: Dylan
    id: dylan001
    user_id: !secret user_id
    device_trackers:
      - device_tracker.phone
      - device_tracker.mobile_app_phone

# ============================================================================
# ZONES
# ============================================================================
zone:
  - name: Home
    latitude: !secret home_latitude
    longitude: !secret home_longitude
    radius: 100
    icon: mdi:home
  
  - name: Work
    latitude: !secret work_latitude
    longitude: !secret work_longitude
    radius: 250
    icon: mdi:briefcase

# ============================================================================
# SUN
# ============================================================================
sun:

# ============================================================================
# WEATHER
# ============================================================================
weather:
  - platform: openweathermap
    api_key: !secret openweathermap_api_key
    mode: daily

# ============================================================================
# CALENDAR
# ============================================================================
calendar:
  - platform: google
    client_id: !secret google_calendar_client_id
    client_secret: !secret google_calendar_client_secret

# ============================================================================
# ENERGY MONITORING
# ============================================================================
energy:

# ============================================================================
# MAP
# ============================================================================
map:

# ============================================================================
# PANEL IFRAME (for external dashboards)
# ============================================================================
panel_iframe:
  agent_api:
    title: "Agent API"
    icon: mdi:robot
    url: "http://localhost:8888/api/status"
    require_admin: true

# ============================================================================
# INCLUDE EXTERNAL CONFIGURATION FILES
# ============================================================================

# Dashboard components
rest_command: !include dashboards/rest_commands.yaml
script: !include dashboards/scripts.yaml
sensor: !include dashboards/sensors.yaml

# Integration configurations
# AI Assistant (OpenAI + Gemini)
openai_conversation: !include integrations/ai-assistant-integration.yaml
google_generative_ai_conversation: !include integrations/ai-assistant-integration.yaml

# Android Device Integration
mobile_app: !include integrations/android-device-integration.yaml

# Automations
automation: !include automations.yaml

# Groups
group: !include groups.yaml

# Scenes
scene: !include scenes.yaml
