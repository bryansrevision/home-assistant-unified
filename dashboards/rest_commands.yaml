---
# REST Commands for Dashboard Integration
# Enables webhook calls, API integrations, and agent control
# Created: February 1, 2026

rest_command:
  # ============================================================================
  # JOIN API COMMANDS
  # ============================================================================
  
  # Send notification via Join
  join_notification:
    url: "https://joinjoaomgcd.appspot.com/_ah/api/messaging/v1/sendPush"
    method: POST
    payload: >
      {
        "apikey": "{{ states.secret.join_api_key }}",
        "deviceId": "{{ deviceId }}",
        "title": "{{ title }}",
        "text": "{{ text }}",
        "icon": "https://www.home-assistant.io/images/favicon-192x192-full.png"
      }
    content_type: "application/json"
  
  # Send Tasker command via Join
  join_tasker_command:
    url: "https://joinjoaomgcd.appspot.com/_ah/api/messaging/v1/sendPush"
    method: POST
    payload: >
      {
        "apikey": "!secret join_api_key",
        "deviceId": "{{ deviceId }}",
        "title": "TaskerCommand",
        "text": "=:={{ taskname }}=:={{ number | default('') }}=:={{ message | default('') }}",
        "priority": 2
      }
    content_type: "application/json"
  
  # Send clipboard data via Join
  join_send_clipboard:
    url: "https://joinjoaomgcd.appspot.com/_ah/api/messaging/v1/sendPush"
    method: POST
    payload: >
      {
        "apikey": "!secret join_api_key",
        "deviceId": "{{ deviceId }}",
        "clipboard": "{{ text }}"
      }
    content_type: "application/json"
  
  # Send file via Join
  join_send_file:
    url: "https://joinjoaomgcd.appspot.com/_ah/api/messaging/v1/sendPush"
    method: POST
    payload: >
      {
        "apikey": "!secret join_api_key",
        "deviceId": "{{ deviceId }}",
        "file": "{{ file_url }}"
      }
    content_type: "application/json"

  # ============================================================================
  # IFTTT WEBHOOK COMMANDS
  # ============================================================================
  
  # Trigger IFTTT webhook
  ifttt_webhook:
    url: "https://maker.ifttt.com/trigger/{{ event }}/with/key/!secret ifttt_webhook_key"
    method: POST
    payload: >
      {
        "value1": "{{ value1 }}",
        "value2": "{{ value2 }}",
        "value3": "{{ value3 }}"
      }
    content_type: "application/json"
  
  # IFTTT Home Assistant event
  ifttt_ha_event:
    url: "https://maker.ifttt.com/trigger/home_assistant_event/with/key/!secret ifttt_webhook_key"
    method: POST
    payload: >
      {
        "value1": "{{ event_type }}",
        "value2": "{{ entity_id }}",
        "value3": "{{ state }}"
      }
    content_type: "application/json"

  # ============================================================================
  # HOME ASSISTANT AGENT API COMMANDS
  # ============================================================================
  
  # Get agent status
  agent_status:
    url: "http://localhost:8888/api/status"
    method: GET
    headers:
      Authorization: "Bearer !secret agent_api_token"
    timeout: 10
  
  # Agent health check
  agent_health_check:
    url: "http://localhost:8888/api/health"
    method: GET
    headers:
      Authorization: "Bearer !secret agent_api_token"
    timeout: 10
  
  # Check integrations
  agent_check_integrations:
    url: "http://localhost:8888/api/integrations"
    method: GET
    headers:
      Authorization: "Bearer !secret agent_api_token"
    timeout: 10
  
  # Sync to GitHub
  agent_github_sync:
    url: "http://localhost:8888/api/sync"
    method: POST
    headers:
      Authorization: "Bearer !secret agent_api_token"
    payload: >
      {
        "message": "Manual sync from dashboard"
      }
    content_type: "application/json"
    timeout: 30
  
  # Execute agent command
  agent_execute_command:
    url: "http://localhost:8888/api/execute"
    method: POST
    headers:
      Authorization: "Bearer !secret agent_api_token"
    payload: >
      {
        "command": "{{ command }}",
        "params": {{ params }}
      }
    content_type: "application/json"
    timeout: 30
  
  # Generate documentation
  agent_generate_docs:
    url: "http://localhost:8888/api/execute"
    method: POST
    headers:
      Authorization: "Bearer !secret agent_api_token"
    payload: >
      {
        "command": "generate_documentation",
        "params": {}
      }
    content_type: "application/json"
    timeout: 60
  
  # Run network scan
  agent_network_scan:
    url: "http://localhost:8888/api/execute"
    method: POST
    headers:
      Authorization: "Bearer !secret agent_api_token"
    payload: >
      {
        "command": "scan_network",
        "params": {
          "subnet": "192.168.1.0/24"
        }
      }
    content_type: "application/json"
    timeout: 60
  
  # Restart Home Assistant
  agent_restart_ha:
    url: "http://localhost:8888/api/restart"
    method: POST
    headers:
      Authorization: "Bearer !secret agent_api_token"
    content_type: "application/json"
    timeout: 10

  # ============================================================================
  # SAMSUNG TV COMMANDS
  # ============================================================================
  
  # Send key to Samsung TV
  samsung_tv_send_key:
    url: "http://{{ tv_ip }}:8001/api/v2/applications/{{ app_id }}"
    method: POST
    headers:
      Authorization: "Bearer {{ tv_token }}"
    payload: >
      {
        "method": "ms.remote.control",
        "params": {
          "Cmd": "Click",
          "DataOfCmd": "{{ key_code }}",
          "Option": "false",
          "TypeOfRemote": "SendRemoteKey"
        }
      }
    content_type: "application/json"

  # ============================================================================
  # ALEXA MEDIA COMMANDS
  # ============================================================================
  
  # Send TTS to Alexa
  alexa_tts:
    url: "http://localhost:8123/api/services/notify/alexa_media_{{ device_name }}"
    method: POST
    headers:
      Authorization: "Bearer {{ ha_token }}"
    payload: >
      {
        "data": {
          "type": "tts"
        },
        "message": "{{ message }}"
      }
    content_type: "application/json"
  
  # Announce on all Alexa devices
  alexa_announce:
    url: "http://localhost:8123/api/services/notify/alexa_media"
    method: POST
    headers:
      Authorization: "Bearer {{ ha_token }}"
    payload: >
      {
        "data": {
          "type": "announce"
        },
        "message": "{{ message }}",
        "target": ["media_player.living_room_echo", "media_player.bedroom_echo"]
      }
    content_type: "application/json"
